<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<title>PII Reidentifier</title>
	<meta name="A simple frontend for our PII reidentifier" content="" />
	<link rel="stylesheet" href="https://unpkg.com/sakura.css/css/sakura.css" type="text/css" />
	<link rel="stylesheet" href="/static/style.css" type="text/css" />
</head>

<body>
	<h1>DHIS Project - Group 3</h1>

	<div class="inputContainer">
		<div>
			<label>Input Text</label>
			<textarea id="inputText" placeholder="Paste deidentified medical info here"></textarea>
		</div>

		<div>
			<label>Output Text</label>
			<textarea id="outputText" placeholder="Reidentified medical info will show up here"
				readonly="true"></textarea>
		</div>
	</div>

	<button onclick="sendPII()">Send</button>
	<br>
	<br>
	<div class="buttonColumn">
		<a href="/remover">Go to deidentifier</a>
		<button onclick="killServer()">ðŸ’€ Kill server</button>
	</div>
</body>

</html>

<script>
	async function sendPII() {
		data = {
			text: document.getElementById("inputText").value,
		};


		response = await fetch("http://localhost:1986/RestorePII", {
			method: "POST",
			headers: {
				"Content-Type": "application/json",
			},
			body: JSON.stringify(data),
		});
		text = await response.json();

		document.getElementById("outputText").value = text["text"];
	}

	phiList = "";
	const columns = 2;

	function killServer() {
		var req = new XMLHttpRequest();
		req.open("POST", "http://localhost:1986/kill");
		req.send();
	}
</script>